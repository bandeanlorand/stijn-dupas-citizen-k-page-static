<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/styles.css">
  <title>Template detail</title>
</head>

<body>
  <main class="container p-0">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Vlaams Kenniscentrum voor Beste Beschikbare Technieken</a></li>
        <li class="breadcrumb-item active" aria-current="page">Tools</li>
      </ol>
    </nav>
    <header class="d-flex justify-content-between align-items-md-center ">
      <div class="row">
        <div class="col-md-12 d-flex align-items-center">
          <div>

            <h1 class="h3">
              BBT-databank
            </h1>
            <p>Doorzoekbare verzameling van milieutechnieken uit Vlaamse en Europese studies</p>
            <div class="toggle-text" id="collapsible-text">
              <p>Onze BBT-databank biedt een compleet overzicht van Beste Beschikbare Technieken en andere milieutechnieken uit zowel Vlaamse BBT-studies als Europese BREFS.
               </p>
               <b>Zo vindt u snel de juiste techniek:</b>

<ul>
    <li>Start met een complete lijst van alle beschikbare technieken</li>
    <li>Filter op één of meerdere sectoren, subsectoren of specifieke deelprocessen</li>
    <li>Verfijn uw zoekresultaten op milieuaspect, waaronder specifieke parameters voor lucht en afvalwater</li>
    <li>Selecteer het gewenste techniektype (BBT, Geen BBT, Techniek in opkomst) of studietype (BBT of BREF)</li>
</ul>
<p>Per techniek vindt u gedetailleerde informatie met directe links naar de bijhorende studies. Komt u via een studiepagina? Dan worden de relevante sectoren automatisch geselecteerd.</p>

<p>Hulp nodig bij het gebruik van de databank? Contacteer ons via <a href="mailto:bbt@vito.be">bbt@vito.be</a>.</p>

            </div>
            <a href="javascript:void(0);" class="toggle-link" id="toggle-button">
              Meer tonen
            </a>
          </div>
        </div>
        
      </div>
    </header>

   

    <section class="content">
      <div class="row">
        <div class="col-12 col-lg-3">
        <div class="offcanvas offcanvas-start filter-block-canvas" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          <div class="filter-block">
            <h3 class="filter-block-title">Sectoren</h3>
            <div class="filter-block-list" >
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="sector1">
                <label class="form-check-label" for="sector1">Afvalverwerking</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="sector2">
                <label class="form-check-label" for="sector2">Bouw<sup>(36)</sup></label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="sector3">
                <label class="form-check-label" for="sector3">Diensten<sup>(437)</sup></label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="sector4">
                <label class="form-check-label" for="sector4">Energie<sup>(437)</sup></label>
              </div>
            </div>
          </div>
          <div class="filter-block">
            <h3 class="filter-block-title">Milieuaspect</h3>
            <div class="filter-block-list" >
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="aspect1">
                <label class="form-check-label" for="aspect1">Lucht<sup>(2189)</sup></label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="aspect2">
                <label class="form-check-label" for="aspect2">Afvalwater<sup>(1405)</sup></label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="aspect3">
                <label class="form-check-label" for="aspect3">watergebruik<sup>(524)</sup></label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="aspect4">
                <label class="form-check-label" for="aspect4">Afval en materialen<sup>(886)</sup></label>
              </div>
            </div>
          </div>
          

          
          <div class="filter-block search">
            <h3 class="filter-block-title">Studie</h3>
            <div class="filter-block-list" style="max-height: 1000px;">
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control search-input" placeholder="Zoek een studie">
              </div>
              <div class="search-dropdown">
                <div>Anorganische bulkchemicaliën (vast en overig) (LVIC-S) (226)</div>
                <div>Anorganische fijnchemicaliën (SIC) (96)</div>
                <div>Asfaltcentrales (70)</div>
                <div>Behandeling en beheer van afvalwater en afvalgas in de chemiesector (CWW) (31)</div>
                <div>Behandeling van bodemas van huisvuilverbranding (23)</div>
                <div>Beton (94)</div>
                <div>Bodemsaneringsprojecten en grondreinigingscentra (52)</div>
                <div>Bulk organische chemie (LVOC) (105)</div>
                <div>Car- en truckwash (50)</div>
                <div>Carrosserieherstel- en carrosseriebouwbedrijven (48)</div>
              </div>
            </div>
          </div>
          </div>
        </div>
        <div class="col-12 col-lg-9">
          <!-- table header filtering - starts here -->
          <div class="table-filtering">
            <div class="filter-type">Filter op:</div>

            <div class="filter-nr"></div>
            <!-- dropdown popup BBT filtering ends here -->
            <div class="pagination-info">Overzicht: <b>103 van 120</b> publicaties  </div>

          </div>
          <div class="filter-container filter-nr-container"></div>
          <!-- table header filtering - ends here -->
          <!-- Table starts here-->
          <div class="techniques-table-wrapper database">
            <table class="techniques-table table  table-bordered text-center w-100">
              <thead>
                <tr class="border-bottom">
                  <th class="text-left">Techniektitel</th>
                  <th class="btn-1">Techniektype</th>
                  <th class="btn-1">Studietype</th>
                </tr>
              </thead>
              <tbody>
                <!-- Table - row starts here -->
                <tr class="border-bottom">
                  <td class="text-left">Row 1</td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>

                </tr>
                <!-- Table - row ends here -->
                 <!-- Table - row starts here -->
                <tr class="border-bottom">
                  <td class="text-left">Row 2</td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>

                </tr>
                <!-- Table - row ends here -->
                 <!-- Table - row starts here -->
                <tr class="border-bottom">
                  <td class="text-left">Row 3</td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>

                </tr>
                <!-- Table - row ends here -->
                 <!-- Table - row starts here -->
                <tr class="border-bottom">
                  <td class="text-left">Row 4</td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>
                  <td class="btn-1 icon-cell">
                    <div class="rating-icon">-/0/+<sup>1</sup></div>
                  </td>

                </tr>
                <!-- Table - row ends here -->
              </tbody>
            </table>
            <!-- Table ends here-->
          </div>
        </div>
      </div>
    </section>


    <button type="button" class="btn btn-primary me-3" data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasExample">Toggle offcanvas</button>


    
      
      

  </main>

  <script>
    // Import the Bootstrap bundle
//
// This includes Popper and all of Bootstrap's JS plugins, but now it's included from the html
// import "../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js";

//
// custom JS here
//
// Create an example popover
document.querySelectorAll('[data-bs-toggle="popover"]')
  .forEach(popover => {
    new bootstrap.Popover(popover)
  })

  document.querySelectorAll('.menu a').forEach(menuLink => {
    menuLink.addEventListener('click', function (e) {
        const target = this.getAttribute('data-target');

        // Handle submenu toggling
        if (this.classList.contains('toggle')) {
            const submenu = this.nextElementSibling;
            submenu.classList.toggle('open');
            this.classList.toggle('open');
        }

        // Remove active class from all menu items
        document.querySelectorAll('.menu a').forEach(link => link.classList.remove('active'));
        this.classList.add('active');

        // Hide all content sections
        document.querySelectorAll('.content-nested-dropdown > div').forEach(content => content.classList.remove('active'));

        // Show the target content
        if (target) {
            document.getElementById(target).classList.add('active');
        }

        // Automatically open parent menus if active
        openParentMenus(this);

        // Check if all top-level submenus are closed and show default content
        checkDefaultContent();
    });
});

function openParentMenus(activeLink) {
    let parent = activeLink.parentElement.parentElement;
    while (parent && parent.classList.contains('submenu')) {
        parent.classList.add('open');
        parent.previousElementSibling.classList.add('open');
        parent = parent.parentElement.parentElement;
    }
}


/* script for table filtering starts here */
/// Wait for the DOM to load
document.addEventListener("DOMContentLoaded", () => {
  const tableFiltering = (() => {
    function initializeTable() {
      toggleColumns('btn-1');
    }
    function toggleColumns(activeButton) {
      // Remove active class from all buttons
      document.querySelectorAll('.d-flex .btn').forEach(button => {
        button.classList.remove('activeTab');
      });

      // Add active class to the clicked button
      const activeButtonElement = document.getElementById(activeButton);
      if (!activeButtonElement) {
        console.error(`Button with id "${activeButton}" not found.`);
        return; // Exit the function if the button is not found
      }
      activeButtonElement.classList.add('activeTab');

      // Hide all columns
      document.querySelectorAll('th, td').forEach(cell => {
        if (cell.classList.contains('btn-1') || cell.classList.contains('btn-2') || cell.classList.contains('btn-3')) {
          cell.classList.add('hidden-column');
        }
      });

      // Show columns corresponding to the active button
      document.querySelectorAll(`.${activeButton}`).forEach(cell => {
        cell.classList.remove('hidden-column');
      });
    }

    function addListeners() {
      document.querySelectorAll('.techniques-table .btn').forEach(button => {
        button.addEventListener('click', function () {
          const buttonId = this.getAttribute('id');
          toggleColumns(buttonId);
        });
      });
    }

    return {
      init: () => {
        initializeTable();
        addListeners();
      },
    };
  })();

  tableFiltering.init();
});
/* script for table filtering ends here */
/* script for the table filtering dropdown Aspect starts here */

document.addEventListener("DOMContentLoaded", () => {
  const toggleButton = document.getElementById("togglePopupButton");
  const popup = document.getElementById("customPopup");
  const closeButton = document.getElementById("closePopupButton");
  const filterButtons = document.querySelectorAll(".filter-button");
  const dropdownItems = document.querySelectorAll(".dropdown-item.filter");
  const addFilterButton = document.getElementById("addFilterButton");
  const filterContainer = document.querySelector(".filter-nr-container");

  const togglePopup = () => {
      popup.style.display = popup.style.display === "block" ? "none" : "block";
      filterButtons.forEach(btn => btn.classList.remove("activeFilter"));
      filterButtons[0].classList.add("activeFilter");
  };

  const closePopup = () => {
      popup.style.display = "none";
  };

  toggleButton.addEventListener("click", (event) => {
      event.stopPropagation();
      togglePopup();
  });

  closeButton.addEventListener("click", closePopup);

  document.addEventListener("click", (event) => {
      if (!popup.contains(event.target) && event.target !== toggleButton) {
          closePopup();
      }
  });

  filterButtons.forEach(button => {
      button.addEventListener("click", () => {
          filterButtons.forEach(btn => btn.classList.remove("activeFilter"));
          button.classList.add("activeFilter");
      });
  });

  addFilterButton.addEventListener("click", () => {
      const activeFilterButton = document.querySelector(".filter-button.activeFilter");
      const activeDropdownItem = document.querySelector(".dropdown-item.filter.activeFilter");

      if (activeDropdownItem) {
          let closestFilterTitle = null;
          let currentElement = activeDropdownItem.previousElementSibling;

          while (currentElement) {
              if (currentElement.classList.contains("filter-title")) {
                  closestFilterTitle = currentElement.textContent.trim();
                  break;
              }
              currentElement = currentElement.previousElementSibling;
          }

          const filterText = activeDropdownItem.textContent.trim();
          const filterLabel = activeFilterButton.textContent.trim();

          const badge = document.createElement("div");
          badge.className = "badge";
          badge.innerHTML = `
              ${filterLabel} effect op ${closestFilterTitle} ${filterText}
              <span class="badge-close">&times;</span>
          `;
          filterContainer.appendChild(badge);

          closePopup();

          badge.querySelector(".badge-close").addEventListener("click", () => {
              badge.remove();
          });
      }
  });

  dropdownItems.forEach(item => {
      item.addEventListener("click", (event) => {
          event.preventDefault();
          dropdownItems.forEach(i => i.classList.remove("activeFilter"));
          item.classList.add("activeFilter");
      });
  });
});

/* script for the table filtering dropdown Aspect ends here */


/* script to toggle content in the header starts here  */
document.addEventListener("DOMContentLoaded", function () {
  const toggleText = document.getElementById("collapsible-text");
  const toggleButton = document.getElementById("toggle-button");

  toggleButton.addEventListener("click", function (e) {
    e.preventDefault();

    // Toggle expanded state
    const isExpanded = toggleText.classList.toggle("expanded");
    toggleButton.classList.toggle("expanded");

    // Update button text and arrow direction
    if (isExpanded) {
      toggleButton.innerHTML = 'Minder tonen';
    } else {
      toggleButton.innerHTML = 'Meer tonen';
    }
  });
});
/* script to toggle content in the header ends here  */








/* script for the table filtering dropdown BBT starts here */
document.addEventListener("DOMContentLoaded", () => {
  const toggleButton = document.getElementById("toggleSecondPopupButton");
  const popup = document.getElementById("customPopupCheckbox");
  const closeButton = document.getElementById("closePopupCBButton");
  const addFilterButtonCheckbox = document.getElementById("addFilterButtonCheckbox");
  const filterContainer = document.querySelector(".filter-nr-container");
  const checkboxes = document.querySelectorAll(".form-check-input");

  // Function to toggle the popup
  const togglePopup = () => {
      popup.style.display = popup.style.display === "block" ? "none" : "block";

      // Uncheck all checkboxes when the popup opens
      checkboxes.forEach(checkbox => checkbox.checked = false);
  };

  // Function to close the popup
  const closePopup = () => {
      popup.style.display = "none";
  };

  // Show/hide popup on button click
  toggleButton.addEventListener("click", (event) => {
      event.stopPropagation();
      togglePopup();
  });

  // Close popup on close button click
  closeButton.addEventListener("click", closePopup);

  // Close popup if clicked outside
  document.addEventListener("click", (event) => {
      if (!popup.contains(event.target) && event.target !== toggleButton) {
          closePopup();
      }
  });

  // Handle "Filter toevoegen" button click
  addFilterButtonCheckbox.addEventListener("click", () => {
      checkboxes.forEach(checkbox => {
          if (checkbox.checked) {
              const label = checkbox.nextElementSibling.textContent.trim();

              // Create badge with BBT text and label text
              const badge = document.createElement("div");
              badge.className = "badge";
              badge.innerHTML = `
                  BBT: ${label}
                  <span class="badge-close">&times;</span>
              `;
              filterContainer.appendChild(badge);

              // Add event listener to remove badge on "x" click
              badge.querySelector(".badge-close").addEventListener("click", () => {
                  badge.remove();
              });
          }
      });

      // Close popup
      closePopup();
  });
});
/* script for the table filtering dropdown BBT ends here */


/* filter badge count script starts here */
document.addEventListener("DOMContentLoaded", () => {
  function updateBadgeCount() {
    const filterContainer = document.querySelector('.filter-nr-container');
    const filterNr = document.querySelector('.filter-nr');

    // Ensure filterContainer exists
    if (!filterContainer) {
      console.error('Error: .filter-nr-container element not found.');
      return;
    }

    const badgeCount = filterContainer.querySelectorAll('.badge').length;

    if (filterNr) {
      if (badgeCount > 0) {
        filterNr.innerHTML = `Filter (<span>${badgeCount}</span>) leegmaken`;
      } else {
        filterNr.innerHTML = '';
      }
    }
  }

  // Initial count update
  updateBadgeCount();

  // Get the filterContainer and ensure it exists before observing
  const filterContainer = document.querySelector('.filter-nr-container');
  if (!filterContainer) {
    console.error('Error: .filter-nr-container element not found. MutationObserver not started.');
    return;
  }

  // Set up a MutationObserver to listen for changes in the filter container
  const observer = new MutationObserver(updateBadgeCount);

  // Start observing the target node for configured mutations
  observer.observe(filterContainer, {
    childList: true, // Monitor addition or removal of child elements
    subtree: false   // Don't watch the entire subtree, just direct children
  });
});
/* filter badge count script starts here */

/* script for playing video starts here */
document.addEventListener('DOMContentLoaded', function() {
  const videoOverlay = document.getElementById('videoOverlay');
  const youtubeVideo = document.getElementById('youtubeVideo');
  
  videoOverlay.addEventListener('click', function() {
      youtubeVideo.src += "&autoplay=1";  // Add autoplay when clicked
      youtubeVideo.classList.remove('hidden');
      videoOverlay.remove();
  });
});
/* script for playing video ends here */


/* script for the data table checkbox filtering starts here */
document.addEventListener("DOMContentLoaded", () => {
  const filterBlocks = document.querySelectorAll(".filter-block");
  const filterContainer = document.querySelector(".filter-container");

  // Checkbox functionality
  document.querySelectorAll(".form-check-input").forEach(checkbox => {
    checkbox.addEventListener("change", () => {
      const label = checkbox.nextElementSibling;
      const blockTitle = checkbox.closest(".filter-block").querySelector(".filter-block-title").textContent.trim();

      if (checkbox.checked) {
        // Create badge
        const badge = document.createElement("div");
        badge.className = "badge";
        badge.innerHTML = `
          ${blockTitle}: ${label.textContent.trim()}
          <span class="badge-close">&times;</span>
        `;
        filterContainer.appendChild(badge);

        // Add event listener for badge close
        badge.querySelector(".badge-close").addEventListener("click", () => {
          badge.remove();
          checkbox.checked = false; // Uncheck the checkbox
        });
      } else {
        // Remove badge when checkbox is unchecked
        const existingBadge = Array.from(filterContainer.children).find(badge =>
          badge.textContent.includes(label.textContent.trim())
        );
        if (existingBadge) existingBadge.remove();
      }
    });
  });
});
/* script for the data table checkbox filtering ends here */


document.addEventListener("DOMContentLoaded", () => {
  const filterBlocks = document.querySelectorAll(".filter-block");
  const filterContainer = document.querySelector(".filter-container");

  // Accordion functionality
  filterBlocks.forEach(block => {
    const title = block.querySelector(".filter-block-title");
    const list = block.querySelector(".filter-block-list");

    // Ensure content is open by default
    list.style.maxHeight = `${list.scrollHeight}px`;

    title.addEventListener("click", () => {
      console.log('clicked');
      if (list.classList.contains("closed")) {
        list.classList.remove("closed");
        list.style.maxHeight = `${list.scrollHeight}px`;
      } else {
        list.classList.add("closed");
        list.style.maxHeight = 0;
        title.classList.add("closed");
      }
    });
  });

  // Search functionality
  const searchInput = document.querySelector(".search-input");
  const searchDropdown = document.querySelector(".search-dropdown");
  const searchList = document.querySelector(".filter-block-list");
  const searchBlock = document.querySelector(".filter-block.search");

  if (searchInput && searchDropdown && searchBlock && searchList ) {

    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      if (query) {
        searchDropdown.classList.add("active");
        searchDropdown.querySelectorAll("div").forEach(item => {
          const text = item.textContent.toLowerCase();
          item.style.display = text.includes(query) ? "block" : "none";
        });
      } else {
        searchDropdown.classList.remove("active");
      }
    });
  }

  if (searchDropdown  ) {

  searchDropdown.addEventListener("click", (event) => {
    if (event.target.tagName === "DIV") {
      const selectedText = event.target.textContent.trim();
      searchInput.value = selectedText;
      searchDropdown.classList.remove("active");

      // Create badge
      const badge = document.createElement("div");
      badge.className = "badge";
      badge.innerHTML = `
        Studie: ${selectedText}
        <span class="badge-close">&times;</span>
      `;
      filterContainer.appendChild(badge);

      // Add searched-element
      const searchedElement = document.createElement("div");
      searchedElement.className = "searched-element";
      searchedElement.innerHTML = `
        ${selectedText}
        <button aria-label="Remove">&times;</button>
      `;
      // searchList.appendChild(searchedElement);
      searchBlock.appendChild(searchedElement);

      // Hide the input field
      searchInput.parentElement.style.display = "none";

      // Close badge functionality
      badge.querySelector(".badge-close").addEventListener("click", () => {
        badge.remove();
        searchedElement.remove();
        searchInput.parentElement.style.display = ""; // Remove inline style
        searchList.style.maxHeight = ""; // Remove inline style
        searchInput.value = ""; // Reset the input
      });

      // Close searched-element functionality
      searchedElement.querySelector("button").addEventListener("click", () => {
        searchedElement.remove();
        badge.remove();
        searchInput.parentElement.style.display = ""; // Remove inline style
        searchList.style.maxHeight = ""; // Remove inline style
        searchInput.value = ""; // Reset the input
      });
    }
  });
}

  // Close dropdown when clicking outside
  document.addEventListener("click", (event) => {
    if (!searchInput.contains(event.target) && !searchDropdown.contains(event.target)) {
      searchDropdown.classList.remove("active");
    }
  });
});
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&family=Yantramanav:wght@100;300;400;500;700;900&display=swap"
    rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</body>

</html>